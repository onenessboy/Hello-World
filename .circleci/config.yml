# Use the latest 2.1 version of CircleCI pipeline process engine.
# See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1

# Define a job to be invoked later in a workflow.
# See: https://circleci.com/docs/2.0/configuration-reference/#jobs
jobs:
  self-hosted-agent-test:
    machine: true
    resource_class: onenessboy/devops-self-hosted-agent
    
    steps:
      - checkout
      - run: az login --service-principal -u $spid -p $spkey --tenant $tenantid
      - run: az az resource list
  

# Invoke jobs via workflows
# See: https://circleci.com/docs/2.0/configuration-reference/#workflows
workflows:
  my-workflow:
    jobs:
      - self-hosted-agent-test:
          context:
            - ab-synpase

